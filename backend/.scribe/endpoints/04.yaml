name: Appointments
description: ''
endpoints:
  -
    httpMethods:
      - POST
    uri: api/appointments/new
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Create New Appointment'
      description: |-
        Creates a new appointment between a patient and doctor.
        Validates doctor availability and prevents double booking.

        VULNERABILITY: XSS in patient_note (raw, no sanitization)
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      patient_id:
        name: patient_id
        description: 'The ID of the patient.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      doctor_id:
        name: doctor_id
        description: 'The ID of the doctor.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      appointment_time:
        name: appointment_time
        description: 'The appointment date and time (Y-m-d H:i:s).'
        required: true
        example: '2024-01-15 10:00:00'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      patient_note:
        name: patient_note
        description: 'optional Additional notes from patient (vulnerable to XSS).'
        required: false
        example: 'Regular checkup'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      patient_id: 1
      doctor_id: 2
      appointment_time: '2024-01-15 10:00:00'
      patient_note: 'Regular checkup'
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "appointment_id": 1,
            "message": "Pengecekan berhasil didaftarkan"
          }
        headers: []
        description: ''
        custom: []
      -
        status: 200
        content: |-
          {
            "success": false,
            "message": "Doctor not available at this time"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/appointments/{appointmentId}/cancel'
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Cancel Appointment (Patient)'
      description: |-
        Allows a patient to cancel their own appointment.
        Requires authentication and checks if the appointment belongs to the patient.

        VULNERABILITY: XSS in cancellation_reason (raw, no sanitization)
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      appointmentId:
        name: appointmentId
        description: 'The ID of the appointment to cancel.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      appointmentId: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      reason:
        name: reason
        description: 'optional Reason for cancellation (vulnerable to XSS).'
        required: false
        example: 'Personal emergency'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      reason: 'Personal emergency'
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "cancelled_appointment": {
              "id": 1,
              "patient_id": 1,
              "doctor_id": 2,
              "time_appointment": "2024-01-15 10:00:00",
              "status": "cancelled",
              "cancellation_reason": "Personal emergency",
              "cancelled_by": "patient"
            },
            "reason": "Personal emergency"
          }
        headers: []
        description: ''
        custom: []
      -
        status: 200
        content: |-
          {
            "success": false,
            "message": "Unauthorized"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/appointments/cancel-by-doctor
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Cancel Appointment by Doctor ID'
      description: |-
        Allows a doctor to cancel an appointment.
        Verifies that the appointment belongs to the specified doctor.

        VULNERABILITY: XSS in cancellation_reason (raw, no sanitization)
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      appointment_id:
        name: appointment_id
        description: 'The ID of the appointment.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      reason:
        name: reason
        description: 'Reason for cancellation (vulnerable to XSS).'
        required: true
        example: 'Doctor unavailable'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      doctor_id:
        name: doctor_id
        description: 'The ID of the doctor.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      appointment_id: 1
      reason: 'Doctor unavailable'
      doctor_id: 2
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "cancelled_appointment": {
              "id": 1,
              "patient_id": 1,
              "doctor_id": 2,
              "time_appointment": "2024-01-15 10:00:00",
              "status": "cancelled",
              "cancellation_reason": "Doctor unavailable",
              "cancelled_by": "doctor"
            },
            "reason": "Doctor unavailable"
          }
        headers: []
        description: ''
        custom: []
      -
        status: 200
        content: |-
          {
            "success": false,
            "message": "Unauthorized or appointment not found"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: api/appointments/doctor
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Get Appointments by Doctor'
      description: 'Retrieves all appointments for a specific doctor including patient information.'
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters:
      doctor_id:
        name: doctor_id
        description: 'The ID of the doctor.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanQueryParameters:
      doctor_id: 2
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "appointments": [
              {
                "id": 1,
                "patient_id": 1,
                "doctor_id": 2,
                "time_appointment": "2024-01-15 10:00:00",
                "status": "pending",
                "patient_note": "Regular checkup",
                "doctor_note": "Tidak ada",
                "patient": {
                  "id": 1,
                  "user_id": 1,
                  "NIK": "1234567890123456",
                  "full_name": "John Doe",
                  "email": "patient@example.com",
                  "phone": "08123456789"
                }
              }
            ]
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: api/appointments/patient
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Get Appointments by Patient'
      description: 'Retrieves all appointments for a specific patient including doctor information.'
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters:
      patient_id:
        name: patient_id
        description: 'The ID of the patient.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanQueryParameters:
      patient_id: 1
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "appointments": [
              {
                "id": 1,
                "patient_id": 1,
                "doctor_id": 2,
                "time_appointment": "2024-01-15 10:00:00",
                "status": "pending",
                "patient_note": "Regular checkup",
                "doctor_note": "Tidak ada",
                "doctor": {
                  "id": 2,
                  "user_id": 2,
                  "str_number": "STR123456",
                  "full_name": "Dr. Jane Smith",
                  "specialist": "Cardiology",
                  "polyclinic": "Heart",
                  "available_time": "08:00-16:00"
                }
              }
            ]
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/appointments/change-schedule/doctor
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Change Schedule by Doctor'
      description: |-
        VULNERABILITY 46: Schedule manipulation without proper validation.
        VULNERABILITY 47: Exposes sensitive request data and server time.
        Allows a doctor to change appointment schedule.
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      new_time:
        name: new_time
        description: 'The new appointment time (Y-m-d H:i:s).'
        required: true
        example: '2024-01-16 14:00:00'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      doctor_id:
        name: doctor_id
        description: 'The ID of the doctor.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      appointment_id:
        name: appointment_id
        description: 'The ID of the appointment.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      new_time: '2024-01-16 14:00:00'
      doctor_id: 2
      appointment_id: 1
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "result": {
              "success": true,
              "updated_appointment": {
                "id": 1,
                "patient_id": 1,
                "doctor_id": 2,
                "time_appointment": "2024-01-16 14:00:00",
                "status": "pending"
              },
              "new_time": "2024-01-16 14:00:00"
            },
            "request_data": {
              "new_time": "2024-01-16 14:00:00",
              "doctor_id": 2,
              "appointment_id": 1
            },
            "server_time": "2024-01-15T10:30:00.000000Z",
            "appointment_id": 1
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/appointments/cancel/doctor
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Cancel Appointment by Doctor'
      description: |-
        VULNERABILITY 48: Unrestricted cancellation.
        VULNERABILITY 49: Sends notification with sensitive patient data including password.
        VULNERABILITY 50: Insecure email sending.
        VULNERABILITY 51: Command injection in email sending.
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      reason:
        name: reason
        description: 'Reason for cancellation (vulnerable to XSS).'
        required: true
        example: Emergency
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      doctor_id:
        name: doctor_id
        description: 'The ID of the doctor.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      appointment_id:
        name: appointment_id
        description: 'The ID of the appointment.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      reason: Emergency
      doctor_id: 2
      appointment_id: 1
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "cancelled_appointment": {
              "id": 1,
              "patient_id": 1,
              "doctor_id": 2,
              "time_appointment": "2024-01-15 10:00:00",
              "status": "cancelled",
              "cancellation_reason": "Emergency",
              "cancelled_by": "doctor"
            },
            "reason": "Emergency"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/appointments/change-schedule/patient
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Change Appointment by Patient'
      description: |-
        VULNERABILITY 46: Schedule manipulation without proper validation or authorization.
        Allows patient to change appointment time without proper checks.
        Exposes sensitive request data and server information.
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      new_time:
        name: new_time
        description: 'The new appointment time (Y-m-d H:i:s).'
        required: true
        example: '2024-01-17 09:00:00'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      patient_id:
        name: patient_id
        description: 'The ID of the patient.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      appointment_id:
        name: appointment_id
        description: 'The ID of the appointment.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      new_time: '2024-01-17 09:00:00'
      patient_id: 1
      appointment_id: 1
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "result": {
              "success": true,
              "updated_appointment": {
                "id": 1,
                "patient_id": 1,
                "doctor_id": 2,
                "time_appointment": "2024-01-17 09:00:00",
                "status": "pending"
              },
              "new_time": "2024-01-17 09:00:00"
            },
            "request_data": {
              "new_time": "2024-01-17 09:00:00",
              "patient_id": 1,
              "appointment_id": 1
            },
            "server_time": "2024-01-15T10:30:00.000000Z",
            "appointment_id": 1
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/appointments/bulk-update
    metadata:
      groupName: Appointments
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Bulk Update Appointments'
      description: |-
        VULNERABILITY 54: Bulk operations without rate limits or proper validation.
        Allows updating multiple appointments at once with SQL injection vulnerability.
        No authentication or authorization required.
        No limit on number of appointments that can be updated.
      authenticated: false
      deprecated: false
      custom: []
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      appointments:
        name: appointments
        description: 'Array of appointment updates.'
        required: true
        example:
          -
            id: 1
            status: confirmed
            new_time: '2024-01-20 10:00:00'
            patient_note: 'Updated by admin'
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'appointments[].id':
        name: 'appointments[].id'
        description: 'Appointment ID (vulnerable to SQL injection).'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'appointments[].status':
        name: 'appointments[].status'
        description: 'New status (vulnerable to SQL injection).'
        required: true
        example: confirmed
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'appointments[].new_time':
        name: 'appointments[].new_time'
        description: 'optional New appointment time (vulnerable to SQL injection).'
        required: false
        example: '2024-01-20 10:00:00'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'appointments[].patient_note':
        name: 'appointments[].patient_note'
        description: 'optional Patient notes (vulnerable to SQL injection & XSS).'
        required: false
        example: 'Updated by admin'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'appointments[].doctor_note':
        name: 'appointments[].doctor_note'
        description: 'optional Doctor notes (vulnerable to SQL injection & XSS).'
        required: false
        example: Reviewed
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      appointments:
        -
          id: 1
          status: confirmed
          new_time: '2024-01-20 10:00:00'
          patient_note: 'Updated by admin'
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "updated_appointments": [
              {
                "id": 1,
                "status": "confirmed",
                "new_time": "2024-01-20 10:00:00",
                "patient_note": "Updated by admin"
              }
            ],
            "message": "Bulk update completed"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
